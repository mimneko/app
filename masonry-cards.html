<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>漢検1級学習アプリ</title>
    <style>
        /* --- 変数定義 --- */
        :root {
            --card-gap: 12px;
            --background-color: #F0F2F5;
            --card-background-color: #FFFFFF;
            --main-text-color: #1d2129;
            --secondary-text-color: #65676b;
            --border-color: #CED0D4;
            --accent-color: #f9752b;
        }

        /* --- リセット & 基本スタイル --- */
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            background-color: var(--background-color);
            color: var(--main-text-color);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* --- レイアウト --- */
        main {
            flex-grow: 1;
            /* 変更: mainの背景色をbodyと同じにし、カードを際立たせる */
            background-color: var(--background-color);
            width: 100%;
        }

        .header-content,
        .main-content,
        .footer-content {
            max-width: 1024px;
            margin-left: auto;
            margin-right: auto;
            padding-left: 16px;
            padding-right: 16px;
            width: 100%;
            box-sizing: border-box;
        }

        /* --- ヘッダー --- */
        .site-header {
            position: sticky;
            top: 0;
            background-color: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            height: 53px;
            display: flex;
            align-items: center;
            z-index: 10;
        }

        .site-header h1 {
            font-size: 20px;
            font-weight: 800;
            margin: 0;
        }

        /* --- メインコンテンツ (タイムライン) --- */
        .timeline {
            /* 変更: 上下に余白を追加 */
            padding-top: var(--card-gap);
            padding-bottom: var(--card-gap);
        }

        /* --- 漢字カード --- */
        .kanji-card {
            padding: 16px;
            display: flex;
            flex-direction: column;

            /* 変更: カードスタイルをモバイルでも適用 */
            background-color: var(--card-background-color);
            margin-bottom: var(--card-gap);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        
        .quiz-card-header {
            font-size: 0.8rem;
            font-weight: bold;
            color: var(--secondary-text-color);
            margin-bottom: 12px;
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 8px;
        }

        .quiz-content .quiz-label {
            font-size: 1rem;
            color: var(--secondary-text-color);
            margin-bottom: 4px;
        }

        .quiz-content .quiz-question {
            font-size: 2.2rem;
            font-weight: bold;
            margin: 8px 0;
            text-align: center;
            line-height: 1.4;
        }
        
        .quiz-question rt {
            font-size: 0.9rem;
            font-weight: 500;
            color: var(--secondary-text-color);
        }

        .quiz-content .yojijukugo {
            letter-spacing: 0.1em;
        }
        
        .quiz-answer-area {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px dashed var(--border-color);
        }

        .quiz-answer {
            padding: 0 4px;
        }
        
        .quiz-answer .answer-text {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--main-text-color);
            margin: 0 0 8px 0;
        }

        .quiz-answer .answer-text strong {
            color: var(--accent-color);
            font-weight: bold;
        }

        .quiz-answer .comment-text {
            font-size: 0.9rem;
            color: var(--secondary-text-color);
            margin: 0;
        }
        
        .answer-list {
            list-style: none;
            padding-left: 0;
            text-align: center;
        }
        
        .answer-list li {
            font-size: 1.1rem;
            margin-bottom: 12px;
        }

        .answer-list li ruby {
            font-size: 1.5rem;
            line-height: 1.2;
        }
        .answer-list li rt {
            font-size: 0.8rem;
        }


        /* --- フッター --- */
        footer {
            padding: 24px 0;
            background-color: var(--background-color);
            border-top: 1px solid var(--border-color);
            color: var(--secondary-text-color);
            font-size: 0.9rem;
            text-align: center;
        }

        /* --- ローディングスピナー --- */
        .loading-spinner {
            text-align: center;
            padding: 20px;
            grid-column: 1 / -1;
            color: var(--secondary-text-color);
        }
        
        .loading-spinner.hidden {
            display: none;
        }

        /* --- Masonry Grid (デスクトップ向け) --- */
        @media (min-width: 640px) {
            .timeline {
                 display: block;
                column-count: 2;
                column-gap: var(--card-gap);
                padding-top: 0;
                padding-bottom: 0;
            }

            .kanji-card {
                break-inside: avoid;
                page-break-inside: avoid;
                padding: 20px;
            }
        }

        @media (min-width: 900px) {
            .timeline {
                column-count: 3;
            }
        }
    </style>
</head>
<body>

    <header class="site-header">
        <div class="header-content">
            <h1>漢検1級学習アプリ</h1>
        </div>
    </header>

    <main>
        <div class="main-content">
            <div class="timeline">
                <!-- 漢字カードはJavaScriptによってここに動的に生成されます -->
                <div class="loading-spinner">
                    <p>読み込み中...</p>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-content">
            <p>&copy; 2025 漢字学習アプリ. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const quizData = [
                { type: 'yojijukugo', category: '四字熟語', question: '魑魅魍魎', answer: { reading: 'ちみもうりょう', meaning: '様々な種類の妖怪や化け物。' } },
                { type: 'reading', category: '言葉の読み', question: '遉', answer: 'さすが', comment: '国字の一つ。' },
                { type: 'antonym', category: '対義語', question: '饒舌', answer: '寡黙', comment: '口数が多いことの反対は、口数が少ないこと。' },
                { type: 'ikkun', category: '一字訓', question: '約める', answer: 'つづめる', comment: '短く縮める、要約する意。「約まる」とも。' },
                { type: 'synonym', category: '類義語', question: '阿諛', answer: '追従', comment: 'どちらも、相手にへつらい、こびることを意味する。' },
                { type: 'reading', category: '言葉の読み', question: '海豚', answer: 'いるか', comment: '熟字訓の一つ。' },
                { type: 'jukugo_to_ikkun', category: '熟語と一字訓', words: [{ word: '会釈', reading: 'えしゃく' }, { word: '会得', reading: 'えとく' }] },
                { type: 'yojijukugo', category: '四字熟語', question: '牽強付会', answer: { reading: 'けんきょうふかい', meaning: '自分に都合よく、無理に理屈をこじつけること。' } },
                { type: 'antonym', category: '対義語', question: '蒙昧', answer: '賢明', comment: '物事の道理に暗いことの反対は、賢く道理に通じていること。' },
                { type: 'ikkun', category: '一字訓', question: '乍ら', answer: 'ながら', comment: '「～しつつ」の意味。' },
                { type: 'synonym', category: '類義語', question: '須臾', answer: '刹那', comment: 'どちらも、きわめて短い時間を表す仏教語。' },
                { type: 'yojijukugo', category: '四字熟語', question: '臥薪嘗胆', answer: { reading: 'がしんしょうたん', meaning: '目的を達成するために、苦労や苦痛に耐えること。' } },
                { type: 'reading', category: '言葉の読み', question: '美人局', answer: 'つつもたせ', comment: '男女が共謀して、他の男から金品をゆすり取ること。' }
            ];

            const timeline = document.querySelector('.timeline');
            const spinner = document.querySelector('.loading-spinner');
            let currentOffset = 0;
            const ITEMS_PER_PAGE = 7;

            const createQuizCard = (quiz) => {
                const card = document.createElement('article');
                card.className = 'kanji-card';

                let innerHTML = `<div class="quiz-card-header">${quiz.category}</div>`;

                switch (quiz.type) {
                    case 'reading':
                    case 'ikkun':
                        innerHTML += `<div class="quiz-content">
                                        <p class="quiz-question"><ruby>${quiz.question}<rt>${quiz.answer}</rt></ruby></p>
                                        ${quiz.comment ? `<div class="quiz-answer-area"><div class="quiz-answer"><p class="comment-text">${quiz.comment}</p></div></div>` : ''}
                                      </div>`;
                        break;
                    case 'yojijukugo':
                        innerHTML += `<div class="quiz-content">
                                        <p class="quiz-question yojijukugo"><ruby>${quiz.question}<rt>${quiz.answer.reading}</rt></ruby></p>
                                        <div class="quiz-answer-area">
                                            <div class="quiz-answer"><p class="answer-text">${quiz.answer.meaning}</p></div>
                                        </div>
                                      </div>`;
                        break;
                    case 'antonym':
                    case 'synonym':
                        innerHTML += `<div class="quiz-content">
                                        <p class="quiz-label">「${quiz.question}」の${quiz.type === 'antonym' ? '対義語' : '類義語'}</p>
                                        <div class="quiz-answer-area">
                                            <div class="quiz-answer"><p class="answer-text" style="font-size:1.2rem; text-align:center;"><strong>${quiz.answer}</strong></p>
                                            ${quiz.comment ? `<p class="comment-text" style="text-align:center;">${quiz.comment}</p>` : ''}</div>
                                        </div>
                                      </div>`;
                        break;
                    case 'jukugo_to_ikkun':
                        innerHTML += `<div class="quiz-content">
                                        <div class="quiz-answer-area" style="border-top: none; margin-top: 0; padding-top: 0;">
                                            <ul class="answer-list">${quiz.words.map(w => `<li><ruby>${w.word}<rt>${w.reading}</rt></ruby></li>`).join('')}</ul>
                                        </div>
                                      </div>`;
                        break;
                    default:
                        innerHTML += `<p>未対応の問題形式です。</p>`;
                }
                
                card.innerHTML = innerHTML;
                return card;
            };

            const loadMoreItems = () => {
                spinner.classList.remove('hidden');
                setTimeout(() => {
                    const newItems = quizData.slice(currentOffset, currentOffset + ITEMS_PER_PAGE);
                    if (newItems.length > 0) {
                        newItems.forEach(item => {
                            const card = createQuizCard(item);
                            timeline.insertBefore(card, spinner);
                        });
                        currentOffset += ITEMS_PER_PAGE;
                    }
                    if (currentOffset >= quizData.length) {
                        spinner.textContent = 'すべての問題を読み込みました';
                        observer.disconnect();
                    } else {
                        spinner.classList.add('hidden');
                    }
                }, 500);
            };

            const observer = new IntersectionObserver((entries) => {
                if (entries[0].isIntersecting) {
                    loadMoreItems();
                }
            }, {
                rootMargin: '0px 0px 400px 0px'
            });

            const initialize = () => {
                loadMoreItems();
                if (currentOffset < quizData.length) {
                    observer.observe(spinner);
                }
            };

            initialize();
        });
    </script>
</body>
</html>

